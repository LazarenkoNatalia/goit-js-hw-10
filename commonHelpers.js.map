{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\n\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst myInput = document.querySelector(\"#datetime-picker\");\nlet startBtn = document.querySelector('button[data-start]');\nlet valDay = document.querySelector('span[data-days]');\nlet valHour = document.querySelector('span[data-hours]');\nlet valMinute = document.querySelector('span[data-minutes]');\nlet valSecond = document.querySelector('span[data-seconds]');\n\nlet timerId = null;\nlet userSelectedDate=new Date();\nstartBtn.disabled = true;\n\nconst optionNotific = {\n  class: \"notific\",\n  position : \"topRight\",\n  title: \"Error\",\n   titleColor: \"white\",\n  message: \"Please choose a date in the future\",\n    messageColor: \"white\",\n  // messageSize: 302,\n    backgroundColor : \"red\",\n  close: true,\n  timeout: 5000\n\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        // console.log(selectedDates[0]);\n        const currentDate = new Date();\n\n        if (selectedDates[0] - currentDate > 0) {\n            startBtn.disabled = false;\n            userSelectedDate = selectedDates[0];\n            \n        } else {\n            startBtn.disabled = true;\n          //  window.alert(\"Please choose a date in the future\");\n           iziToast.show(optionNotific);\n        }\n    }\n};\n\n\nconst fp = flatpickr(myInput, options);\n\nstartBtn.addEventListener('click', onTimerStart);\n\nfunction onTimerStart() {\n  \n  timerId = setInterval(() => {\n    const startTime = new Date();\n    const countdown = userSelectedDate - startTime;\n    startBtn.disabled = true;\n\n    if (countdown < 0) {\n      clearInterval(timerId);\n      return;\n    }\n    updateTimerFace(convertMs(countdown));\n  }, 1000);\n}\n\nfunction updateTimerFace({ days, hours, minutes, seconds }) {\n  valDay.textContent = addLeadingZero(days);\n  valHour.textContent =addLeadingZero(hours);\n  valMinute.textContent = addLeadingZero(minutes);\n  valSecond.textContent = addLeadingZero(seconds);\n}\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, 0);\n}"],"names":["myInput","startBtn","valDay","valHour","valMinute","valSecond","timerId","userSelectedDate","optionNotific","options","selectedDates","currentDate","iziToast","flatpickr","onTimerStart","countdown","updateTimerFace","convertMs","days","hours","minutes","seconds","addLeadingZero","ms","value"],"mappings":"2GAQA,MAAMA,EAAU,SAAS,cAAc,kBAAkB,EACzD,IAAIC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAAY,SAAS,cAAc,oBAAoB,EAEvDC,EAAU,KACVC,EAAiB,IAAI,KACzBN,EAAS,SAAW,GAEpB,MAAMO,EAAgB,CACpB,MAAO,UACP,SAAW,WACX,MAAO,QACN,WAAY,QACb,QAAS,qCACP,aAAc,QAEd,gBAAkB,MACpB,MAAO,GACP,QAAS,GAEX,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CAEnB,MAAMC,EAAc,IAAI,KAEpBD,EAAc,CAAC,EAAIC,EAAc,GACjCV,EAAS,SAAW,GACpBM,EAAmBG,EAAc,CAAC,IAGlCT,EAAS,SAAW,GAErBW,EAAS,KAAKJ,CAAa,EAEjC,CACL,EAGWK,EAAUb,EAASS,CAAO,EAErCR,EAAS,iBAAiB,QAASa,CAAY,EAE/C,SAASA,GAAe,CAEtBR,EAAU,YAAY,IAAM,CAE1B,MAAMS,EAAYR,EADA,IAAI,KAItB,GAFAN,EAAS,SAAW,GAEhBc,EAAY,EAAG,CACjB,cAAcT,CAAO,EACrB,MACD,CACDU,EAAgBC,EAAUF,CAAS,CAAC,CACrC,EAAE,GAAI,CACT,CAEA,SAASC,EAAgB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DnB,EAAO,YAAcoB,EAAeJ,CAAI,EACxCf,EAAQ,YAAamB,EAAeH,CAAK,EACzCf,EAAU,YAAckB,EAAeF,CAAO,EAC9Cf,EAAU,YAAciB,EAAeD,CAAO,CAChD,CAGA,SAASJ,EAAUM,EAAI,CAQrB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,CAAC,CACpC"}